#!/bin/sh
set -e

version=5.1.26
hash=14f152228495a715f526eb74134d43c960919cc534d2bc67cfe34a63e6cf7721
file=Oracle_VM_VirtualBox_Extension_Pack-$version.vbox-extpack
accept_license=715c7246dc0f779ceab39446812362b2f9bf64a55ed5d3a905f053cfab36da9e
error ()
{
	echo "Hash mismatch $file: expected $hash"
	exit 1
}

# Source debconf library.
. /usr/share/debconf/confmodule

if [ "$1" = "configure" ] ; then
	cd /usr/share/virtualbox-ext-pack
	echo "virtualbox-ext-pack: downloading: http://download.virtualbox.org/virtualbox/$version/$file"
	echo "The file will be downloaded into /usr/share/virtualbox-ext-pack"
	wget -q -N http://download.virtualbox.org/virtualbox/$version/$file
	echo "$hash  $file" | sha256sum -c > /dev/null 2>&1 || error
	vboxmanage extpack install --replace --accept-license=$accept_license $file
fi

#DEBHELPER#
